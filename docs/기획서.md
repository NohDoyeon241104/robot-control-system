# ROS2 연동을 고려한 전체 시스템 설계도 와 추천 폴더 구조 
### 1. 전체 시스템 아키텍처 설계도
이 설계의 핵심은 Spring Boot가 중계자 (Bridge) 역할을 수행하여, 웹 브라우저(Vue)와 로봇시스템(ROS2) 사이의 데이터 흐름을 제어하는 것입니다.
    - Vue(Frontend) : 사용자의 명령(로봇 이동, 장비 등록) 을 전달하고, 로봇의 센서 데이터 (LiDAR,  카메라)를 시각화한다.
    - Spring Boot(Backend):
        - Rest API : 장비 등록 정보,사용자 관리 등 정적 데이터 처리.
        - WebSocket/MQTT : 로봇의 실시간 상태를 프론트엔드로 스트리밍.
        - JNI or Native Bridge: Java에서 ROS2 클라이언트 라이브러리(rcljava 등)를 직접 호출하거나, 별도의 Python/C++ 브리지 노드와 통신
    - ROS2 (Robot OS) : 실제 하드웨어 제어 및 센서 데이터 수집.
### 2. 추천 폴더 구조 (D드라이브)
하나의 루트 폴더 (ROBOT-CONTROL-SYSTEM) 만들고, 그 안에 두 플젝을 분리하여 관리 예정
```
D:/robot-control-system/
├── backend-springboot/       # Spring Boot Maven Project
│   ├── src/
│   ├── pom.xml               # 의존성 관리
│   └── ...
├── frontend-vue/             # Vue.js Project (Vite/Vue CLI)
│   ├── src/
│   ├── package.json
│   └── ...
└── docs/                     # (선택) 기획서, UI 설계(Figma 내보내기), API 명세
```
### 3. 통신 흐름 설계 (Data Flow)
장비를 등록하고 ROS2와 통신할 때의 흐름은 다음과 같은 설계로 간다.
#### 1. 설정 흐름(Configuration)
1. Vue : 사용자가 장비/센서 정보를 json으로 구성하여 전송.
2. Spring Boot : 해당 json을 db에 저장
3. Spring Boot : 저장된 설정을 바탕으로 ros2 브리지 노드를 초기화
(특정 Topic 구독 시작)
#### 2. 제어 및 모니터링 흐름( Control & Monitoring)
1. CORS설정 : Vue(보통 5173)과 Spring Boot(포트 8080)의 포트가 다르므로, Spring Boot에서 CORS허용 설정을 가장 먼저 해줘야 통신이 된다.
2. 의존성 추가 : 
SpringBoot : Spring Web,Spring Data JPA, Lombok, WebSocket 의존성을 pom.xml에 미리 추가하기
    - Vue:axio(통신), pinia(상태 관리), vuetify 또는 element-plus(UI라이브러리) 설치 추천
3. ROS2 연동 방식 결정: 
* Spring Boot 서버가 돌아가는 OS에 직접 ROS2를 깔고 rcljava를 쓸 것인지,
아니면 별도의 Python 기반 ROS Bridge를 띄워두고 서버와 MQTT/WebSocket으로 통신할 것인지 결정해야 합니다. (초기에는 후자가 훨씬 구현이 쉽습니다.)




1. 실시간성 확보 (WebSocket vs ROS Bridge)
설계서의 2.2 로봇 제어와 2.5 모니터링 핵심은 실시간성입니다.

구현 팁: Vue에서 직접 rosbridge_suite와 연결하면 속도는 빠르지만 보안과 로깅이 어렵습니다.

추천 구조: 설계서의 사용자 플로우 4.2처럼 로봇 ↔ Spring Boot(STOMP/WebSocket) ↔ Vue 구조를 유지하세요. Spring Boot가 데이터를 필터링하고 가공해서 전달해줘야 브라우저의 부하를 줄일 수 있습니다.

2. 맵 뷰(Map View) 시각화의 기술적 선택
설계서 2.3 맵 뷰를 구현할 때 단순히 그림을 그리는 것을 넘어 실제 좌표계 매핑이 필요합니다.

Canvas (Konva.js): 수백 개의 장애물 점(Point Cloud)을 찍어야 한다면 성능상 가장 유리합니다.

SVG: 로봇 아이콘이나 경로(Line) 위주의 깔끔한 그래픽에 유리합니다.

OpenLayers/Leaflet: 만약 실외 로봇이라 GPS 지도가 필요하다면 이 라이브러리들을 검토해 보세요.

3. 동적 폼과 DTO 매핑의 실제
설계서 2.4 장비 등록 모달에서 입력받은 ROS2 설정과 센서 구성은 아까 논의했던 JSON 형태의 DTO로 전송하게 됩니다.

주의: Topic Prefix나 Node Name에 특수문자가 들어오지 않도록 Vue 단에서 Regex(정규표현식) 검사를 꼭 넣어주세요. ROS2는 네이밍 규칙에 엄격합니다.

4. D 드라이브 폴더 관리 및 실행 환경
D 드라이브에 폴더를 만드실 때, 두 프로젝트를 동시에 띄우기 위한 팁입니다.

VS Code 활용: File > Add Folder to Workspace 기능을 사용해 backend-springboot와 frontend-vue 폴더를 하나의 워크스페이스로 묶어서 관리하세요. 터미널을 두 개 열어 하나는 mvn spring-boot:run, 하나는 npm run dev를 실행하시면 됩니다.

🚀 개발 시작을 위한 첫 걸음 제안
설계서가 준비되었으니, 이제 D 드라이브에 폴더를 만들고 기초 코드를 생성할 차례입니다.

어떤 것을 먼저 도와드릴까요?

Backend 설정: pom.xml 구성과 설계서의 DTO(RobotRegisterRequest) 기본 클래스 만들기

Frontend 설정: Vue 3 프로젝트 생성 및 설계서의 전체 레이아웃(Sidebar/Header) 뼈대 잡기

CORS/연결 설정: 두 프로젝트가 서로 데이터를 주고받을 수 있도록 통신 설정하기